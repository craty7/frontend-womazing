{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Desktop/JavaScript (05.11.2022)/project clothes shop(18.03.2023)/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/hp/Desktop/JavaScript (05.11.2022)/project clothes shop(18.03.2023)/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hp/Desktop/JavaScript (05.11.2022)/project clothes shop(18.03.2023)/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{UserContext}from\"../App\";import axios from\"axios\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Comment(_ref){var value=_ref.value,text=_ref.text;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checked=_useState2[0],setChecked=_useState2[1];var _useState3=useState(\"\".concat(text)),_useState4=_slicedToArray(_useState3,2),edited=_useState4[0],setEdited=_useState4[1];var _useContext=useContext(UserContext),setIsLoading=_useContext.setIsLoading,ref=_useContext.ref;var user=JSON.parse(localStorage.getItem('user'));function deleteComment(_x){return _deleteComment.apply(this,arguments);}function _deleteComment(){_deleteComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(value){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/comments/\").concat(value.id),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){console.log(res.data);}).catch(function(e){return console.log(e);});case 2:setIsLoading(function(prev){return!prev;});case 3:case\"end\":return _context.stop();}},_callee);}));return _deleteComment.apply(this,arguments);}function editComment(_x2){return _editComment.apply(this,arguments);}function _editComment(){_editComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(value){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/comments/\").concat(value.id),{data:{text:edited},headers:{Authorization:\"Bearer \".concat(process.env.REACT_APP_API_TOKEN)}}).then(function(res){console.log(res.data);console.log(value.attributes.user);}).catch(function(e){return console.log(e);});case 2:setIsLoading(function(prev){return!prev;});case 3:case\"end\":return _context2.stop();}},_callee2);}));return _editComment.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"level\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'700px'},children:[/*#__PURE__*/_jsxs(\"nav\",{className:'title is-6 m-0 has-text-black has-text-weight-semibold heading',children:[value.attributes.user.data.attributes.username,\":\"]}),!checked?/*#__PURE__*/_jsx(\"nav\",{className:\"ml-1\",children:value.attributes.text}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"is-inline-block\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"bordd ml-0 mb-1\",onInput:function onInput(event){return setEdited(event.target.value);},value:edited}),/*#__PURE__*/_jsx(\"nav\",{className:\"has-text-right\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(_){editComment(value);setChecked(false);},className:\"button is-success is-small p-1 mb-3\",style:{height:'21px'},children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"subtitle is-7 mt-5\",children:value.attributes.createdAt})]})})})})}),ref===true&&value.attributes.user.data.id===user.id&&/*#__PURE__*/_jsx(\"div\",{className:\"column is-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"level-item ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-item ml-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(_){return deleteComment(value);},className:\"button is-rounded p-1 is-small is-danger\",children:\"delete\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"level-item ml-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(_){return setChecked(!checked);},className:\"button is-rounded p-1 is-small is-info\",children:\"edit\"})})]})})]})})});}export default Comment;","map":{"version":3,"names":["React","useContext","useState","UserContext","axios","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Comment","_ref","value","text","_useState","_useState2","_slicedToArray","checked","setChecked","_useState3","concat","_useState4","edited","setEdited","_useContext","setIsLoading","ref","user","JSON","parse","localStorage","getItem","deleteComment","_x","_deleteComment","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","delete","process","env","REACT_APP_API_URL","id","headers","Authorization","then","res","console","log","data","catch","e","stop","editComment","_x2","_editComment","_callee2","_callee2$","_context2","put","REACT_APP_API_TOKEN","attributes","children","className","style","width","username","type","onInput","event","target","onClick","_","height","createdAt"],"sources":["C:/Users/hp/Desktop/JavaScript (05.11.2022)/project clothes shop(18.03.2023)/frontend/src/pages/Comment.jsx"],"sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {UserContext} from \"../App\";\r\nimport axios from \"axios\";\r\n\r\nfunction Comment({value, text}) {\r\n    const [checked, setChecked] = useState(false)\r\n    const [edited, setEdited] = useState(`${text}`)\r\n    const {setIsLoading, ref} = useContext(UserContext)\r\n    const user = JSON.parse(localStorage.getItem('user'))\r\n\r\n\r\n    async function deleteComment(value) {\r\n        await axios.delete(`${process.env.REACT_APP_API_URL}/comments/${value.id}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n            },\r\n        })\r\n            .then(res => {\r\n                console.log(res.data)\r\n            }).catch(e => console.log(e))\r\n        setIsLoading(prev => !prev)\r\n    }\r\n\r\n    async function editComment(value) {\r\n        // e.preventDefault()\r\n        await axios.put(`${process.env.REACT_APP_API_URL}/comments/${value.id}`, {\r\n            data: {\r\n                text: edited,\r\n            },\r\n            headers: {\r\n                Authorization: `Bearer ${process.env.REACT_APP_API_TOKEN}`,\r\n            }\r\n        }).then(res => {\r\n            console.log(res.data)\r\n            console.log(value.attributes.user)\r\n        }).catch(e => console.log(e))\r\n        setIsLoading(prev => !prev)\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='box'>\r\n                <div className=\"columns\">\r\n                    <div className=\"column\">\r\n                        <nav className=\"level\">\r\n                            <div className=\"level-left\">\r\n                                <div className=\"level-item\">\r\n                                    <div style={{width: '700px'}}>\r\n                                        <nav\r\n                                            className={'title is-6 m-0 has-text-black has-text-weight-semibold heading'}>{value.attributes.user.data.attributes.username}:\r\n                                        </nav>\r\n                                        {!checked\r\n                                            ? <nav className='ml-1'>{value.attributes.text}</nav>\r\n                                            : <>\r\n                                                <div className='is-inline-block'>\r\n                                                    <input type=\"text\"\r\n                                                           className='bordd ml-0 mb-1'\r\n                                                           onInput={event => setEdited(event.target.value)}\r\n                                                           value={edited}/>\r\n                                                    <nav className='has-text-right'>\r\n                                                        <button\r\n                                                            onClick={_ => {\r\n                                                                editComment(value)\r\n                                                                setChecked(false)}}\r\n                                                            className='button is-success is-small p-1 mb-3'\r\n                                                            style={{height: '21px'}}>Изменить\r\n                                                        </button>\r\n                                                    </nav>\r\n                                                </div>\r\n\r\n                                            </>\r\n                                        }\r\n                                        <nav className='subtitle is-7 mt-5'>{value.attributes.createdAt}</nav>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </nav>\r\n                    </div>\r\n\r\n                    {ref === true && value.attributes.user.data.id === user.id &&\r\n                        <div className=\"column is-1\">\r\n                            <div className=\"level-item ml-4\">\r\n                                <div className=\"level-item ml-2\">\r\n                                    <button onClick={_ => deleteComment(value)}\r\n                                            className='button is-rounded p-1 is-small is-danger'>delete\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"level-item ml-2\">\r\n                                    <button onClick={_ => setChecked(!checked)}\r\n                                            className='button is-rounded p-1 is-small is-info'>edit\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}