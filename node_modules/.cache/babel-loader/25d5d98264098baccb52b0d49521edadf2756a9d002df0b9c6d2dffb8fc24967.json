{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Desktop/JavaScript (05.11.2022)/project clothes shop(18.03.2023)/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/hp/Desktop/JavaScript (05.11.2022)/project clothes shop(18.03.2023)/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hp/Desktop/JavaScript (05.11.2022)/project clothes shop(18.03.2023)/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{UserContext}from\"../App\";import axios from\"axios\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Comment(_ref){var value=_ref.value;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checked=_useState2[0],setChecked=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),edited=_useState4[0],setEdited=_useState4[1];var _useContext=useContext(UserContext),user=_useContext.user;function deleteComment(_x){return _deleteComment.apply(this,arguments);}function _deleteComment(){_deleteComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(value){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/comments/\").concat(value.id),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){console.log(res.data);}).catch(function(e){return console.log(e);});case 2:case\"end\":return _context.stop();}},_callee);}));return _deleteComment.apply(this,arguments);}function editComment(_x2){return _editComment.apply(this,arguments);}function _editComment(){_editComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(value){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/comments/\").concat(value.id),{data:{text:edited},headers:{Authorization:\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){console.log(res.data);console.log(value.attributes.user);}).catch(function(e){return console.log(e);});case 2:case\"end\":return _context2.stop();}},_callee2);}));return _editComment.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"level\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"level-item\",children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'700px'},children:[/*#__PURE__*/_jsxs(\"nav\",{className:'title is-6 m-0 has-text-black has-text-weight-semibold heading',children:[value.attributes.user.data.attributes.username,\":\"]}),!checked?/*#__PURE__*/_jsx(\"nav\",{className:\"ml-1\",children:value.attributes.text}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"is-inline-block\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"bord ml-0 mb-1\",onInput:function onInput(event){return setEdited(event.target.value);},value:edited}),/*#__PURE__*/_jsx(\"nav\",{className:\"has-text-right\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(_){return editComment(value);},className:\"button is-success is-small p-1 mb-3\",style:{height:'21px'},children:\"confirm\"})})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"subtitle is-7 mt-5\",children:value.attributes.createdAt})]})})})})}),user.jwt.length>0&&value.attributes.user.data.id===user.user.id&&/*#__PURE__*/_jsx(\"div\",{className:\"column is-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"level-item ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-item ml-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(_){return deleteComment(value);},className:\"button is-rounded p-1 is-small is-danger\",children:\"delete\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"level-item ml-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(_){return setChecked(!checked);},className:\"button is-rounded p-1 is-small is-info\",children:\"edit\"})})]})})]})})});}export default Comment;","map":{"version":3,"names":["React","useContext","useState","UserContext","axios","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Comment","_ref","value","_useState","_useState2","_slicedToArray","checked","setChecked","_useState3","_useState4","edited","setEdited","_useContext","user","deleteComment","_x","_deleteComment","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","delete","concat","process","env","REACT_APP_API_URL","id","headers","Authorization","localStorage","getItem","then","res","console","log","data","catch","e","stop","editComment","_x2","_editComment","_callee2","_callee2$","_context2","put","text","attributes","children","className","style","width","username","type","onInput","event","target","onClick","_","height","createdAt","jwt","length"],"sources":["C:/Users/hp/Desktop/JavaScript (05.11.2022)/project clothes shop(18.03.2023)/frontend/src/pages/Comment.jsx"],"sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {UserContext} from \"../App\";\r\nimport axios from \"axios\";\r\n\r\nfunction Comment({value}) {\r\n    const [checked, setChecked] = useState(false)\r\n    const [edited, setEdited] = useState('')\r\n    const {user} = useContext(UserContext)\r\n\r\n\r\n    async function deleteComment(value) {\r\n        await axios.delete(`${process.env.REACT_APP_API_URL}/comments/${value.id}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n            },\r\n        })\r\n            .then(res => {\r\n                console.log(res.data)\r\n            }).catch(e => console.log(e))\r\n    }\r\n\r\n    async function editComment(value) {\r\n        // e.preventDefault()\r\n        await axios.put(`${process.env.REACT_APP_API_URL}/comments/${value.id}`, {\r\n            data: {\r\n                text: edited,\r\n            },\r\n            headers: {\r\n                Authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n            }\r\n        }).then(res => {\r\n            console.log(res.data)\r\n            console.log(value.attributes.user)\r\n        }).catch(e => console.log(e))\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className='box'>\r\n                <div className=\"columns\">\r\n                    <div className=\"column\">\r\n                        <nav className=\"level\">\r\n                            <div className=\"level-left\">\r\n                                <div className=\"level-item\">\r\n                                    <div style={{width: '700px'}}>\r\n                                        <nav\r\n                                            className={'title is-6 m-0 has-text-black has-text-weight-semibold heading'}>{value.attributes.user.data.attributes.username}:\r\n                                        </nav>\r\n                                        {!checked\r\n                                            ? <nav className='ml-1'>{value.attributes.text}</nav>\r\n                                            : <>\r\n                                                <div className='is-inline-block'>\r\n                                                    <input type=\"text\"\r\n                                                           className='bord ml-0 mb-1'\r\n                                                           onInput={event => setEdited(event.target.value)}\r\n                                                           value={edited}/>\r\n                                                    <nav className='has-text-right'>\r\n                                                        <button onClick={_ => editComment(value)}\r\n                                                                className='button is-success is-small p-1 mb-3'\r\n                                                                style={{height: '21px'}}>confirm\r\n                                                        </button>\r\n                                                    </nav>\r\n                                                </div>\r\n\r\n                                            </>\r\n                                        }\r\n                                        <nav className='subtitle is-7 mt-5'>{value.attributes.createdAt}</nav>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </nav>\r\n                    </div>\r\n\r\n                    {user.jwt.length > 0 && value.attributes.user.data.id === user.user.id &&\r\n                        <div className=\"column is-1\">\r\n                            <div className=\"level-item ml-4\">\r\n                                <div className=\"level-item ml-2\">\r\n                                    <button onClick={_ => deleteComment(value)}\r\n                                            className='button is-rounded p-1 is-small is-danger'>delete\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"level-item ml-2\">\r\n                                    <button onClick={_ => setChecked(!checked)}\r\n                                            className='button is-rounded p-1 is-small is-info'>edit\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}