{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\JavaScript (05.11.2022)\\\\project clothes shop(18.03.2023)\\\\frontend\\\\src\\\\components\\\\SignUpForm\\\\SignUpForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from 'react';\nimport axios from \"axios\";\nimport { UserContext } from \"../../App\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SignUpForm(props) {\n  _s();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [cpassword, setCpassword] = useState('');\n  const [data, setData] = useState(null);\n  const navigate = useNavigate();\n  const {\n    setUser\n  } = useContext(UserContext);\n  async function handleSubmit(event) {\n    event.preventDefault();\n    if (password === cpassword) {\n      await axios.post('http://localhost:1338/api/auth/local/register', {\n        username: username,\n        email: email,\n        password: password\n      }).then(result => {\n        // document.cookie = `jwt=${result.data.jwt}` // document.cookie - внутри куки создает ключ 'jwt'\n        // document.cookie = `active=${true}`\n\n        localStorage.setItem('active', 'true');\n        localStorage.setItem('jwt', result.data.jwt);\n        localStorage.setItem('user', JSON.stringify(result.data.user)); // так как внутри user хранится объект (массив), нужно хранить в JSON\n\n        // npm i react-toastify --legacy-peer-deps\n\n        toast.success('Вы успешно зарегистрировали новый аккаунт!', {\n          position: \"top-center\",\n          autoClose: 2000,\n          hideProgressBar: true\n        });\n        navigate('/');\n        setUser(prev => {\n          return {\n            ...prev,\n            jwt: result.data.jwt,\n            active: true,\n            username: result.data.username,\n            id: result.data.id\n          };\n        });\n        console.log(result);\n        setData(result);\n      }).catch(e => {\n        console.log(e);\n      });\n      console.log(data);\n      setUsername('');\n      setEmail('');\n      setPassword('');\n      setCpassword('');\n      return;\n    }\n    alert('Ваши пароли не совпадают');\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"box px-6 py-4\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Username...\",\n        className: \"input my-1\",\n        value: username,\n        onInput: e => setUsername(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email...\",\n        className: \"input my-1\",\n        value: email,\n        onInput: e => setEmail(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password...\",\n        className: \"input my-1\",\n        value: password,\n        onInput: e => setPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Confirm password...\",\n        className: \"input my-1\",\n        value: cpassword,\n        onInput: e => setCpassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          backgroundColor: '#509498'\n        },\n        className: \"button mt-4 has-text-white\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n_s(SignUpForm, \"b6kDtRHMMvWhpF5naBwTK7bP84M=\", false, function () {\n  return [useNavigate];\n});\n_c = SignUpForm;\nexport default SignUpForm;\nvar _c;\n$RefreshReg$(_c, \"SignUpForm\");","map":{"version":3,"names":["React","useContext","useState","axios","UserContext","useNavigate","toast","jsxDEV","_jsxDEV","SignUpForm","props","_s","username","setUsername","email","setEmail","password","setPassword","cpassword","setCpassword","data","setData","navigate","setUser","handleSubmit","event","preventDefault","post","then","result","localStorage","setItem","jwt","JSON","stringify","user","success","position","autoClose","hideProgressBar","prev","active","id","console","log","catch","e","alert","className","children","onSubmit","type","placeholder","value","onInput","target","required","fileName","_jsxFileName","lineNumber","columnNumber","style","backgroundColor","_c","$RefreshReg$"],"sources":["C:/Users/hp/Desktop/JavaScript (05.11.2022)/project clothes shop(18.03.2023)/frontend/src/components/SignUpForm/SignUpForm.jsx"],"sourcesContent":["import React, {useContext, useState} from 'react';\nimport axios from \"axios\"\nimport {UserContext} from \"../../App\";\nimport {useNavigate} from \"react-router-dom\";\nimport {toast} from \"react-toastify\";\n\nfunction SignUpForm(props) {\n    const [username, setUsername] = useState('')\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [cpassword, setCpassword] = useState('')\n    const [data, setData] = useState(null)\n    const navigate = useNavigate()\n    const {setUser} = useContext(UserContext)\n\n    async function handleSubmit(event) {\n        event.preventDefault()\n        if (password === cpassword) {\n            await axios.post('http://localhost:1338/api/auth/local/register', {\n                        username: username,\n                        email: email,\n                        password: password\n                    })\n                .then(result => {\n                        // document.cookie = `jwt=${result.data.jwt}` // document.cookie - внутри куки создает ключ 'jwt'\n                        // document.cookie = `active=${true}`\n\n                        localStorage.setItem('active', 'true')\n                        localStorage.setItem('jwt', result.data.jwt)\n                        localStorage.setItem('user', JSON.stringify(result.data.user)) // так как внутри user хранится объект (массив), нужно хранить в JSON\n\n                        // npm i react-toastify --legacy-peer-deps\n\n                        toast.success('Вы успешно зарегистрировали новый аккаунт!', {\n                            position: \"top-center\",\n                            autoClose: 2000,\n                            hideProgressBar: true\n                        })\n\n                        navigate('/')\n\n                        setUser(prev => {\n                            return {\n                                ...prev,\n                                jwt: result.data.jwt,\n                                active: true,\n                                username: result.data.username,\n                                id: result.data.id\n                            }\n                        })\n                    console.log(result)\n                    setData(result)\n                }).catch(e => {\n                    console.log(e)\n                })\n            console.log(data)\n\n            setUsername('')\n            setEmail('')\n            setPassword('')\n            setCpassword('')\n            return\n        }\n        alert('Ваши пароли не совпадают')\n    }\n\n\n    return (\n        <div className='box px-6 py-4'>\n                <form onSubmit={handleSubmit}>\n                    <input\n                        type=\"text\"\n                        placeholder='Username...'\n                        className='input my-1'\n                        value={username}\n                        onInput={e => setUsername(e.target.value)}\n                        required={true}/>\n\n                    <input type=\"email\"\n                           placeholder='Email...'\n                           className='input my-1'\n                           value={email}\n                           onInput={e => setEmail(e.target.value)}\n                           required={true}/>\n\n                    <input type=\"password\"\n                           placeholder='Password...'\n                           className='input my-1'\n                           value={password}\n                           onInput={e => setPassword(e.target.value)}\n                           required={true}/>\n\n                    <input type=\"password\"\n                           placeholder='Confirm password...'\n                           className='input my-1'\n                           value={cpassword}\n                           onInput={e => setCpassword(e.target.value)}\n                           required={true}/>\n                    <button style={{backgroundColor: '#509498'}} className='button mt-4 has-text-white'>Register</button>\n                </form>\n            </div>\n    );\n}\n\nexport default SignUpForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}